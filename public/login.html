<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>Login</title>
    <link rel="icon" href="images/knight-frank-icon.png"/>
    <!-- JQuery & Bootstrap -->
    <script src="scripts/jquery-2.1.4.min.js"></script>
    <link rel="stylesheet" type="text/css" href="scripts/bootstrap.min.css"/>
    <!-- Font -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" type="text/css" href="scripts/style.css"/>
</head>

<body class="login">
	<header>
    	<img src="images/knight-frank-logo.png" alt="Knight Frank"/>
	</header>
	<div class="login-popup">
		<h3>Admin Login</h3>
		<div class="content">
			<input id="email-input" type="text" class="input-text" placeholder="Email"/>
			<input id="password-input" type="password" class="input-text" placeholder="Password"/>
			<div class="forget">
				<a id="forget-btn"><u>Forget Password?</u></a>
			</div>
			<input type="button" class="btn btn-info login-btn" value="Login" id="login-btn"/>
		</div>
	</div>
</body>

<!-- Firebase script -->
<script src="https://www.gstatic.com/firebasejs/3.0.5/firebase.js"></script>
<script src="https://www.gstatic.com/firebasejs/3.0.5/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/3.0.5/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/3.0.5/firebase-database.js"></script>

<script>
	// Initialize Firebase
	var config = {
		apiKey: "AIzaSyA_wrmu7wFqdueDEL3EMo15uDCsU7RpuR8",
		authDomain: "project-6187710772564662230.firebaseapp.com",
		databaseURL: "https://project-6187710772564662230.firebaseio.com",
		storageBucket: "project-6187710772564662230.appspot.com",
	};
	firebase.initializeApp(config);
	
	// Firebase auth
	var firebaseAuth = function() {
		var email = $('#email-input').val();
		var password = $('#password-input').val();
		firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {
			var errorCode = error.code;
			var errorMessage = error.message;
			console.log("Error " + errorCode + ": " + errorMessage);
		})
	};
	
	$('#login-btn').on('click',firebaseAuth);
	
	firebase.auth().onAuthStateChanged(function(user) {
		if (user) {
			window.location.href = "dashboard.html";
		} else {
			console.log("No user is signed in");
		}
	});
	
	$(document).keydown(function(event) {
		var keyCode = event.which;   
    	if (keyCode == 13) {
			$('#login-btn').click();
    	}
	});
</script>

</html>
